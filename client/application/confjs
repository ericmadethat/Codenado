Template.conf.onRendered( function(){
	
	var connection = new RTCMultiConnection("channel-id");

	// easiest way to customize what you need!
	connection.session = {
	    audio: true,
	    video: true
	};

	// on getting local or remote media stream
	connection.onstream = function(e) {
			alert('connection.onstream: received event'); //this is triggered each time there is a new participant
			console.log("HERE IS THE EVENT OBJECT:")
			console.log(e)
	    document.body.appendChild(e.mediaElement);
	};

	// setup signaling channel
	connection.connect("channel-id"); //connect doesn't auto join the room

	// open new session
	document.querySelector('#openNewSessionButton').onclick = function() {
	    connection.open("channel-id"); //'open' = joins room(?)
	};

	connection.onNewSession = function(session) {
    session.join({audio: true});              // join session while allowing only audio
    session.join({video: true});              // join session while allowing only video
    session.join({oneway: true}); // to join with no stream!
    console.log(session);
	};

})

